module.exports = function (grunt) {
  var browsers = [{
    browserName: 'internet explorer',
    platform: 'XP',
    version: '8'
  }];

	grunt.initConfig({
		connect: {
			server: {
				options: {
					base: '',
					port: 9999
				}
			}
		},

    'saucelabs-qunit': {
      all: {
        options: {
          urls: ["http://127.0.0.1:9999/test/test-runner.html"],
          tunnelTimeout: 5,
          build: process.env.TRAVIS_JOB_ID,
          concurrency: 3,
          browsers: browsers,
          testname: "to-markdown tests",
          tags: ["master"]
        }
      }
    },

		watch: {}
	});

  // Loading dependencies
  for (var key in grunt.file.readJSON('package.json').devDependencies) {
    if (key !== 'grunt' && key.indexOf('grunt') === 0) {
      grunt.loadNpmTasks(key);
    }
  }

  grunt.registerTask('serve', ['connect', 'watch']);
  grunt.registerTask('test', ['connect', 'saucelabs-qunit']);
};
